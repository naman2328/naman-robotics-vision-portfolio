<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Industrial Vision Inspection Simulator</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f8;
            margin: 0;
            padding: 20px;
        }

        h1 {
            margin-bottom: 5px;
        }

        .subtitle {
            color: #555;
            margin-bottom: 20px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 60% 40%;
            gap: 20px;
        }

        .panel {
            background: #ffffff;
            border: 1px solid #ccc;
            padding: 15px;
        }

        .camera-box {
            height: 320px;
            background: #000;
            color: #0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            font-size: 14px;
        }

        .roi {
            position: absolute;
            border: 2px dashed red;
            width: 200px;
            height: 80px;
        }

        .status-item {
            margin-bottom: 10px;
            font-size: 15px;
        }

        .ok {
            color: green;
            font-weight: bold;
        }

        .ng {
            color: red;
            font-weight: bold;
        }

        .controls button {
            margin-right: 10px;
            margin-top: 10px;
            padding: 8px 14px;
            cursor: pointer;
        }

        .logs {
            margin-top: 20px;
            background: #111;
            color: #0f0;
            padding: 10px;
            height: 180px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 13px;
        }

        a {
            text-decoration: none;
        }
    </style>
</head>

<body>

    <h1>Industrial Vision Inspection Simulator</h1>
    <p class="subtitle">
        Representative dashboard of a camera-based inspection system used in a production environment.
    </p>

    <div class="dashboard">

        <!-- CAMERA PANEL -->
        <div class="panel">
            <h3>Camera Feed</h3>
            <div class="camera-box">
                LIVE CAMERA FEED
                <div class="roi"></div>
            </div>
            <p>Red box indicates locked Region of Interest (ROI).</p>
        </div>

        <!-- STATUS PANEL -->
        <div class="panel">
            <h3>System Status</h3>

            <div class="status-item">
                <strong>System:</strong> <span id="systemStatus">STOPPED</span>
            </div>

            <div class="status-item">
                <strong>Inspection Result:</strong>
                <span id="inspectionResult">---</span>
            </div>

            <div class="status-item">
                <strong>Part Count:</strong>
                <span id="partCount">0</span>
            </div>

            <div class="status-item">
                <strong>Timestamp:</strong>
                <span id="timestamp">--</span>
            </div>

            <div class="controls">
                <button onclick="startInspection()">Start Inspection</button>
                <button onclick="injectFault()">Inject Fault</button>
                <button onclick="stopInspection()">Stop</button>
                <button onclick="resetCounter()">Reset Counter</button>
            </div>
        </div>
    </div>

    <!-- LOG PANEL -->
    <div class="panel" style="margin-top:20px;">
        <h3>System Logs</h3>
        <div class="logs" id="logBox">
            System initialized.<br>
        </div>
    </div>

    <p style="margin-top:20px;">
        <a href="vision.html">‚Üê Back to Vision System</a>
    </p>

    <!-- ================= JAVASCRIPT ================= -->
    <script>
        let count = 0;
        let running = false;

        function log(message) {
            const logBox = document.getElementById("logBox");
            const time = new Date().toLocaleTimeString();
            logBox.innerHTML += `[${time}] ${message}<br>`;
            logBox.scrollTop = logBox.scrollHeight;
        }

        function startInspection() {
            running = true;
            document.getElementById("systemStatus").innerText = "RUNNING";
            inspectPart(true);
        }

        function stopInspection() {
            running = false;
            document.getElementById("systemStatus").innerText = "STOPPED";
            document.getElementById("inspectionResult").innerText = "---";
            log("Inspection stopped.");
        }

        function inspectPart(isOK) {
            if (!running) return;

            count++;
            document.getElementById("partCount").innerText = count;
            document.getElementById("timestamp").innerText =
                new Date().toLocaleString();

            if (isOK) {
                document.getElementById("inspectionResult").innerText = "OK";
                document.getElementById("inspectionResult").className = "ok";
                log("ROI processed. OCR validated. Status: OK");
            } else {
                document.getElementById("inspectionResult").innerText = "NG";
                document.getElementById("inspectionResult").className = "ng";
                log("Validation failed. Status: NG");
            }
        }

        function injectFault() {
            if (!running) return;
            inspectPart(false);
        }

        function resetCounter() {
            count = 0;
            document.getElementById("partCount").innerText = "0";
            log("Part counter reset.");
        }
    </script>

</body>
</html>
